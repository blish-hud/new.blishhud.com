"use strict";(self.webpackChunknew_blishhud_com=self.webpackChunknew_blishhud_com||[]).push([[7824],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>f});var r=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var l=r.createContext({}),u=function(e){var t=r.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):a(a({},t),e)),n},c=function(e){var t=u(e.components);return r.createElement(l.Provider,{value:t},e.children)},d="mdxType",p={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var n=e.components,i=e.mdxType,o=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),d=u(n),m=i,f=d["".concat(l,".").concat(m)]||d[m]||p[m]||o;return n?r.createElement(f,a(a({ref:t},c),{},{components:n})):r.createElement(f,a({ref:t},c))}));function f(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var o=n.length,a=new Array(o);a[0]=m;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[d]="string"==typeof e?e:i,a[1]=s;for(var u=2;u<o;u++)a[u]=n[u];return r.createElement.apply(null,a)}return r.createElement.apply(null,n)}m.displayName="MDXCreateElement"},3846:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>a,default:()=>p,frontMatter:()=>o,metadata:()=>s,toc:()=>u});var r=n(7462),i=(n(7294),n(3905));const o={id:"ensuring-stability",title:"Ensuring Stability"},a=void 0,s={unversionedId:"modules/module-citizen/ensuring-stability",id:"modules/module-citizen/ensuring-stability",title:"Ensuring Stability",description:"While Blish HUD does everything it can to avoid crashing when modules misbehave, your module should also catch and handle exceptions appropriately.",source:"@site/docs/modules/module-citizen/ensuring-stability.md",sourceDirName:"modules/module-citizen",slug:"/modules/module-citizen/ensuring-stability",permalink:"/docs/modules/module-citizen/ensuring-stability",draft:!1,tags:[],version:"current",frontMatter:{id:"ensuring-stability",title:"Ensuring Stability"},sidebar:"DevGuides",previous:{title:"User-Friendly UI/UX",permalink:"/docs/modules/module-citizen/friendly-ui-ux"},next:{title:"Repo Etiquette",permalink:"/docs/modules/module-citizen/repo-etiquette"}},l={},u=[{value:"Handle exceptions when working with external resources",id:"handle-exceptions-when-working-with-external-resources",level:2},{value:"Look out for symptoms of anti-virus",id:"look-out-for-symptoms-of-anti-virus",level:2},{value:"Failed Web Requests",id:"failed-web-requests",level:3},{value:"Failed File System Read/Writes",id:"failed-file-system-readwrites",level:3}],c={toc:u},d="wrapper";function p(e){let{components:t,...n}=e;return(0,i.kt)(d,(0,r.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"While Blish HUD does everything it can to avoid crashing when modules misbehave, your module should also catch and handle exceptions appropriately."),(0,i.kt)("p",null,"With tens of thousands of users, your module will run on many system configurations, security products, and other environmental variables.  Design it to be resilient to these differences."),(0,i.kt)("h2",{id:"handle-exceptions-when-working-with-external-resources"},"Handle exceptions when working with external resources"),(0,i.kt)("p",null,"Whenever you read a file, make a web request, or use any other external resource, be prepared for the resource to be unavailable."),(0,i.kt)("p",null,"In these scenarios:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Wrap calls in try/catch blocks")," and handle exceptions appropriately."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Notify the user when a failure blocks core functionality."),"  For non-critical features, indicate in the UI when a feature is unavailable because an external call failed (and provide details if possible)."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Provide graceful fallbacks")," such as disabling affected features with a note if something fails to load.  Clear messaging prevents confusion when something is temporarily unavailable."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Log the issue")," using your logger.  Avoid ",(0,i.kt)("inlineCode",{parentName:"li"},"ERROR")," or ",(0,i.kt)("inlineCode",{parentName:"li"},"FATAL")," levels for environmental failures you are already handling to prevent flooding Sentry with reports you cannot directly resolve."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Use reasonable retry logic."),"  If a failure may be transient, consider a limited retry after a delay or on a spaced interval.  This allows your module to self-heal without thrashing the user's system.")),(0,i.kt)("admonition",{type:"info"},(0,i.kt)("p",{parentName:"admonition"},"Use tools like Fiddler to block web API traffic corrupt your settings files to test your exception handling.  These exercises help surface gaps before users encounter them."),(0,i.kt)("p",{parentName:"admonition"},"The Guild Wars 2 API has experienced notable downtime and disruptions over the years.  Preparing now avoids emergency fixes later when thousands of users are affected at once.")),(0,i.kt)("h2",{id:"look-out-for-symptoms-of-anti-virus"},"Look out for symptoms of anti-virus"),(0,i.kt)("admonition",{title:"To preface",type:"caution"},(0,i.kt)("p",{parentName:"admonition"},"We ",(0,i.kt)("strong",{parentName:"p"},"do not")," attempt to circumvent anti-virus or other security software.  Instead, we try to detect when it interferes and notify the user so they can address it."),(0,i.kt)("p",{parentName:"admonition"},"We also submit our compiled assemblies to anti-virus vendors for review when we see repeat issues so they can manually approve them.")),(0,i.kt)("p",null,"Even with signed releases, some anti-virus solutions may still block behavior.  Common examples include:"),(0,i.kt)("h3",{id:"failed-web-requests"},"Failed Web Requests"),(0,i.kt)("p",null,"Trivial web requests can throw unexpected exceptions if outbound requests are blocked by security software."),(0,i.kt)("p",null,"Wrap all web requests in try/catch blocks and handle exceptions.  When a request specifically returns ",(0,i.kt)("inlineCode",{parentName:"p"},"HRResult -2147467259"),", call ",(0,i.kt)("inlineCode",{parentName:"p"},"Debug.Contingency.NotifyHttpAccessDenied")," to notify the user.  Managed Guild Wars 2 API client calls already handle this check."),(0,i.kt)("h3",{id:"failed-file-system-readwrites"},"Failed File System Read/Writes"),(0,i.kt)("p",null,"Simple file reads or writes\u2014even to files your module created\u2014can be blocked, including directories other modules write to successfully."),(0,i.kt)("p",null,"Wrap all file IO in try/catch blocks and handle exceptions.  For file operations that throw ",(0,i.kt)("inlineCode",{parentName:"p"},"UnauthorizedAccessException"),", use ",(0,i.kt)("inlineCode",{parentName:"p"},"Debug.Contingency.NotifyFileSaveAccessDenied")," to alert the user when IO is blocked."))}p.isMDXComponent=!0}}]);