"use strict";(globalThis.webpackChunknew_blishhud_com=globalThis.webpackChunknew_blishhud_com||[]).push([[1700],{8057(e,i,s){s.r(i),s.d(i,{assets:()=>a,contentTitle:()=>o,default:()=>u,frontMatter:()=>r,metadata:()=>l,toc:()=>d});var n=s(4848),t=s(8453);const r={id:"ensuring-stability",title:"Ensuring Stability"},o=void 0,l={id:"modules/module-citizen/ensuring-stability",title:"Ensuring Stability",description:"While Blish HUD does everything it can to avoid crashing when modules misbehave, your module should also catch and handle exceptions appropriately.",source:"@site/docs/modules/module-citizen/ensuring-stability.md",sourceDirName:"modules/module-citizen",slug:"/modules/module-citizen/ensuring-stability",permalink:"/docs/modules/module-citizen/ensuring-stability",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{id:"ensuring-stability",title:"Ensuring Stability"},sidebar:"DevGuides",previous:{title:"User-Friendly UI/UX",permalink:"/docs/modules/module-citizen/friendly-ui-ux"},next:{title:"Repo Etiquette",permalink:"/docs/modules/module-citizen/repo-etiquette"}},a={},d=[{value:"Handle exceptions when working with external resources",id:"handle-exceptions-when-working-with-external-resources",level:2},{value:"Look out for symptoms of anti-virus",id:"look-out-for-symptoms-of-anti-virus",level:2},{value:"Failed Web Requests",id:"failed-web-requests",level:3},{value:"Failed File System Read/Writes",id:"failed-file-system-readwrites",level:3}];function c(e){const i={admonition:"admonition",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.p,{children:"While Blish HUD does everything it can to avoid crashing when modules misbehave, your module should also catch and handle exceptions appropriately."}),"\n",(0,n.jsx)(i.p,{children:"With tens of thousands of users, your module will run on many system configurations, security products, and other environmental variables.  Design it to be resilient to these differences."}),"\n",(0,n.jsx)(i.h2,{id:"handle-exceptions-when-working-with-external-resources",children:"Handle exceptions when working with external resources"}),"\n",(0,n.jsx)(i.p,{children:"Whenever you read a file, make a web request, or use any other external resource, be prepared for the resource to be unavailable."}),"\n",(0,n.jsx)(i.p,{children:"In these scenarios:"}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.strong,{children:"Wrap calls in try/catch blocks"})," and handle exceptions appropriately."]}),"\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.strong,{children:"Notify the user when a failure blocks core functionality."}),"  For non-critical features, indicate in the UI when a feature is unavailable because an external call failed (and provide details if possible)."]}),"\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.strong,{children:"Provide graceful fallbacks"})," such as disabling affected features with a note if something fails to load.  Clear messaging prevents confusion when something is temporarily unavailable."]}),"\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.strong,{children:"Log the issue"})," using your logger.  Avoid ",(0,n.jsx)(i.code,{children:"ERROR"})," or ",(0,n.jsx)(i.code,{children:"FATAL"})," levels for environmental failures you are already handling to prevent flooding Sentry with reports you cannot directly resolve."]}),"\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.strong,{children:"Use reasonable retry logic."}),"  If a failure may be transient, consider a limited retry after a delay or on a spaced interval.  This allows your module to self-heal without thrashing the user's system."]}),"\n"]}),"\n",(0,n.jsxs)(i.admonition,{type:"info",children:[(0,n.jsx)(i.p,{children:"Use tools like Fiddler to block web API traffic corrupt your settings files to test your exception handling.  These exercises help surface gaps before users encounter them."}),(0,n.jsx)(i.p,{children:"The Guild Wars 2 API has experienced notable downtime and disruptions over the years.  Preparing now avoids emergency fixes later when thousands of users are affected at once."})]}),"\n",(0,n.jsx)(i.h2,{id:"look-out-for-symptoms-of-anti-virus",children:"Look out for symptoms of anti-virus"}),"\n",(0,n.jsxs)(i.admonition,{title:"To preface",type:"caution",children:[(0,n.jsxs)(i.p,{children:["We ",(0,n.jsx)(i.strong,{children:"do not"})," attempt to circumvent anti-virus or other security software.  Instead, we try to detect when it interferes and notify the user so they can address it."]}),(0,n.jsx)(i.p,{children:"We also submit our compiled assemblies to anti-virus vendors for review when we see repeat issues so they can manually approve them."})]}),"\n",(0,n.jsx)(i.p,{children:"Even with signed releases, some anti-virus solutions may still block behavior.  Common examples include:"}),"\n",(0,n.jsx)(i.h3,{id:"failed-web-requests",children:"Failed Web Requests"}),"\n",(0,n.jsx)(i.p,{children:"Trivial web requests can throw unexpected exceptions if outbound requests are blocked by security software."}),"\n",(0,n.jsxs)(i.p,{children:["Wrap all web requests in try/catch blocks and handle exceptions.  When a request specifically returns ",(0,n.jsx)(i.code,{children:"HRResult -2147467259"}),", call ",(0,n.jsx)(i.code,{children:"Debug.Contingency.NotifyHttpAccessDenied"})," to notify the user.  Managed Guild Wars 2 API client calls already handle this check."]}),"\n",(0,n.jsx)(i.h3,{id:"failed-file-system-readwrites",children:"Failed File System Read/Writes"}),"\n",(0,n.jsx)(i.p,{children:"Simple file reads or writes\u2014even to files your module created\u2014can be blocked, including directories other modules write to successfully."}),"\n",(0,n.jsxs)(i.p,{children:["Wrap all file IO in try/catch blocks and handle exceptions.  For file operations that throw ",(0,n.jsx)(i.code,{children:"UnauthorizedAccessException"}),", use ",(0,n.jsx)(i.code,{children:"Debug.Contingency.NotifyFileSaveAccessDenied"})," to alert the user when IO is blocked."]})]})}function u(e={}){const{wrapper:i}={...(0,t.R)(),...e.components};return i?(0,n.jsx)(i,{...e,children:(0,n.jsx)(c,{...e})}):c(e)}},8453(e,i,s){s.d(i,{R:()=>o,x:()=>l});var n=s(6540);const t={},r=n.createContext(t);function o(e){const i=n.useContext(r);return n.useMemo(function(){return"function"==typeof e?e(i):{...i,...e}},[i,e])}function l(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),n.createElement(r.Provider,{value:i},e.children)}}}]);