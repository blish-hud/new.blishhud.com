"use strict";(globalThis.webpackChunknew_blishhud_com=globalThis.webpackChunknew_blishhud_com||[]).push([[6087],{3987(e,t,r){r.r(t),r.d(t,{default:()=>l});var s=r(6540),a=r(4848);const o="https://api.guildwars2.com/v2";async function n(e){const t=performance.now();try{const r=await fetch(e,{method:"GET",headers:{Accept:"application/json"}}),s=Math.round(performance.now()-t),a=await async function(e){const t=await e.text();if(!t)return null;try{return JSON.parse(t)}catch{return t}}(r);if(!r.ok){const e=a&&"object"==typeof a&&(a.text||a.error||a.message)||("string"==typeof a?a:"")||r.statusText||"Request failed";return{state:"error",status:r.status,error:String(e),details:a,ms:s}}return{state:"success",status:r.status,data:a,ms:s}}catch(r){const e=Math.round(performance.now()-t);return{state:"error",error:r?.message||"Network error (fetch threw)",details:r,ms:e}}}function i({level:e}){const t=(0,s.useMemo)(()=>{const t={display:"inline-block",padding:"2px 8px",borderRadius:999,fontSize:12,fontWeight:600,border:"1px solid var(--ifm-color-emphasis-300)",background:"var(--ifm-background-surface-color)"};return"success"===e?{...t,borderColor:"var(--ifm-color-success)",color:"var(--ifm-color-success)"}:"warn"===e?{...t,borderColor:"var(--ifm-color-warning)",color:"var(--ifm-color-warning)"}:"error"===e?{...t,borderColor:"var(--ifm-color-danger)",color:"var(--ifm-color-danger)"}:t},[e]),r="success"===e?"OK":"warn"===e?"WARN":"error"===e?"ERROR":"INFO";return(0,a.jsx)("span",{style:t,children:r})}function c({name:e,result:t}){const r="tokeninfo"===e?"/tokeninfo":"account"===e?"/account":"characters"===e?"/characters?ids=all":e;return(0,a.jsxs)("div",{style:{border:"1px solid var(--ifm-color-emphasis-300)",borderRadius:12,padding:12,background:"var(--ifm-background-surface-color)"},children:[(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",gap:12,alignItems:"center"},children:[(0,a.jsx)("div",{style:{fontWeight:700},children:r}),(0,a.jsx)("div",{style:{fontSize:12,opacity:.8},children:"loading"===t.state?"Loading\u2026":"idle"===t.state?"Idle":`${t.ms}ms`})]}),(0,a.jsxs)("div",{style:{marginTop:8,fontSize:14},children:["idle"===t.state&&(0,a.jsx)("div",{children:"Not run."}),"loading"===t.state&&(0,a.jsx)("div",{children:"Request in progress\u2026"}),"success"===t.state&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"Status:"})," ",t.status]}),(0,a.jsxs)("details",{style:{marginTop:8},children:[(0,a.jsx)("summary",{style:{cursor:"pointer"},children:"Response JSON"}),(0,a.jsx)("pre",{style:{marginTop:8,whiteSpace:"pre-wrap"},children:JSON.stringify(t.data,null,2)})]})]}),"error"===t.state&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"Status:"})," ",t.status??"\u2014"]}),(0,a.jsxs)("div",{style:{marginTop:6},children:[(0,a.jsx)("strong",{children:"Error:"})," ",t.error]}),void 0!==t.details&&(0,a.jsxs)("details",{style:{marginTop:8},children:[(0,a.jsx)("summary",{style:{cursor:"pointer"},children:"Error details"}),(0,a.jsx)("pre",{style:{marginTop:8,whiteSpace:"pre-wrap"},children:JSON.stringify(t.details,null,2)})]})]})]})]})}function l(){const[e,t]=(0,s.useState)(""),[r,l]=(0,s.useState)(!1),[d,u]=(0,s.useState)({tokeninfo:{state:"idle"},account:{state:"idle"},characters:{state:"idle"}}),h=function(e){const t=e.tokeninfo,r=e.account,s=e.characters,a="error"===t.state||"success"===t.state?t.status:void 0,o="error"===r.state||"success"===r.state?r.status:void 0,n="error"===s.state||"success"===s.state?s.status:void 0;if([t,r,s].every(e=>"idle"===e.state))return{level:"info",title:"Run the checks",bullets:["Paste a key and click Run checks."]};if([t,r,s].some(e=>"loading"===e.state))return{level:"info",title:"Checking\u2026",bullets:["Waiting for responses."]};if("error"===t.state)return 401===a||403===a?{level:"error",title:"The API key is not accepted",bullets:["This usually means the key is wrong, revoked, or expired.","Double-check you pasted the full key (no extra spaces).","Generate a new key and try again."]}:{level:"error",title:"Token validation failed",bullets:["The tokeninfo endpoint didn\u2019t return a valid response.","If this is a network/CORS issue, try another browser or disable blocking extensions.","If the Guild Wars 2 API is down, retry later."]};if("success"===t.state&&"error"===r.state)return 401===o||403===o||500===o?{level:"warn",title:"Key is valid, but can\u2019t access /account",bullets:["Key looks real (tokeninfo succeeded), but /account didn't load correctly."]}:{level:"warn",title:"Key is valid, but /account errored",bullets:["Token is accepted, but /account request failed for another reason.","Check the error details shown below.","Retry; if it persists, it may be a transient API issue that you'll need to wait until it resolves."]};if("success"===r.state&&"error"===s.state)return 401===n||403===n?{level:"warn",title:"Account works, but characters are forbidden",bullets:["Your key can read /account but not /characters.","Most common cause: missing 'characters' permission on the key.","Fix: re-create the key and enable the characters permission.","Retry; if it persists, it may be a transient API issue that you'll need to wait until it resolves."]}:{level:"warn",title:"Account works, but /characters errored",bullets:["Key is valid and can read /account, but /characters request failed.","Check the error details shown below.","Retry; if it persists, it may be a transient API issue that you'll need to wait until it resolves."]};if("success"===t.state&&"success"===r.state&&"success"===s.state){const e=Array.isArray(s.data)?s.data.length:void 0;return{level:"success",title:"API key looks healthy",bullets:["tokeninfo, account, and characters all succeeded.",void 0!==e?`Characters returned: ${e}`:"Characters returned successfully."]}}return{level:"info",title:"Mixed results",bullets:["Some calls succeeded and some failed\u2014use the per-endpoint details below."]}}(d);const f=e.trim().length>0&&!r;return(0,a.jsxs)("div",{style:{display:"grid",gap:12},children:[(0,a.jsxs)("div",{style:{border:"1px solid var(--ifm-color-emphasis-300)",borderRadius:12,padding:12,background:"var(--ifm-background-surface-color)"},children:[(0,a.jsx)("div",{style:{fontWeight:800,marginBottom:6},children:"API Key Troubleshooter"}),(0,a.jsx)("div",{style:{fontSize:14,opacity:.85,marginBottom:10},children:"Enter your Guild Wars 2 API Key."}),(0,a.jsxs)("div",{style:{display:"flex",gap:8,flexWrap:"wrap",alignItems:"center"},children:[(0,a.jsx)("input",{type:"text",value:e,onChange:e=>t(e.target.value),placeholder:"Paste API key\u2026",autoComplete:"off",spellCheck:!1,style:{flex:"1 1 320px",padding:"10px 12px",borderRadius:10,border:"1px solid var(--ifm-color-emphasis-300)",background:"var(--ifm-background-color)",color:"var(--ifm-font-color-base)"}}),(0,a.jsx)("button",{onClick:async function(){const t=e.trim();if(!t)return;l(!0),u({tokeninfo:{state:"loading"},account:{state:"loading"},characters:{state:"loading"}});const r=function(e){const t=encodeURIComponent(e.trim());return{tokeninfo:`${o}/tokeninfo?access_token=${t}`,account:`${o}/account?access_token=${t}`,characters:`${o}/characters?ids=all&access_token=${t}`}}(t),[s,a,i]=await Promise.all([n(r.tokeninfo),n(r.account),n(r.characters)]);u({tokeninfo:(s.state,s),account:(a.state,a),characters:(i.state,i)}),l(!1)},disabled:!f,style:{padding:"10px 12px",borderRadius:10,border:"1px solid var(--ifm-color-primary)",background:f?"var(--ifm-color-primary)":"var(--ifm-color-emphasis-200)",color:f?"white":"var(--ifm-font-color-base)",fontWeight:700,cursor:f?"pointer":"not-allowed"},children:r?"Running\u2026":"Run checks"}),(0,a.jsx)("button",{onClick:function(){t(""),l(!1),u({tokeninfo:{state:"idle"},account:{state:"idle"},characters:{state:"idle"}})},disabled:r&&e.trim().length>0,style:{padding:"10px 12px",borderRadius:10,border:"1px solid var(--ifm-color-emphasis-300)",background:"transparent",color:"var(--ifm-font-color-base)",fontWeight:700,cursor:r?"not-allowed":"pointer"},children:"Reset"})]})]}),(0,a.jsxs)("div",{style:{border:"1px solid var(--ifm-color-emphasis-300)",borderRadius:12,padding:12,background:"var(--ifm-background-surface-color)"},children:[(0,a.jsxs)("div",{style:{display:"flex",gap:10,alignItems:"center"},children:[(0,a.jsx)(i,{level:h.level}),(0,a.jsx)("div",{style:{fontWeight:800},children:h.title})]}),(0,a.jsx)("ul",{style:{marginTop:8,marginBottom:0},children:h.bullets.map((e,t)=>(0,a.jsx)("li",{style:{marginTop:6},children:e},t))})]}),(0,a.jsxs)("div",{style:{display:"grid",gap:12,gridTemplateColumns:"repeat(auto-fit, minmax(260px, 1fr))"},children:[(0,a.jsx)(c,{name:"tokeninfo",result:d.tokeninfo}),(0,a.jsx)(c,{name:"account",result:d.account}),(0,a.jsx)(c,{name:"characters",result:d.characters})]})]})}}}]);